apiVersion: dashboard.grafana.app/v2beta1
kind: Dashboard
metadata:
  name: istio-services-overview
spec:
  annotations:
    - kind: AnnotationQuery
      spec:
        builtIn: true
        enable: true
        hide: true
        iconColor: rgba(0, 211, 255, 1)
        name: Annotations & Alerts
        query:
          group: grafana
          kind: DataQuery
          spec: {}
          version: v0
  cursorSync: 'Off'
  editable: false
  elements:
    panel-10:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (rate(istio_tcp_received_bytes_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source"}[$__rate_interval]))
                      legendFormat: >-
                        {{source_canonical_service}} ->
                        {{destination_canonical_service}}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: >-
          Rate of TCP request data sent from this service to server services in
          the Istio system.
        id: 10
        links: []
        title: TCP request throughput
        vizConfig:
          group: timeseries
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                custom:
                  fillOpacity: 30
                  gradientMode: opacity
                  lineInterpolation: smooth
                  lineWidth: 2
                  showPoints: never
                  stacking:
                    group: A
                    mode: normal
                unit: Bps
              overrides: []
            options:
              legend:
                calcs: []
                displayMode: list
                placement: right
                showLegend: true
              tooltip:
                mode: multi
                sort: desc
          version: v10.0.0
    panel-11:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (rate(istio_tcp_sent_bytes_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source"}[$__rate_interval]))
                      legendFormat: >-
                        {{source_canonical_service}} <-
                        {{destination_canonical_service}}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: >-
          Rate of TCP response data received by this service from server
          services in the Istio system.
        id: 11
        links: []
        title: TCP response throughput
        vizConfig:
          group: timeseries
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                custom:
                  fillOpacity: 30
                  gradientMode: opacity
                  lineInterpolation: smooth
                  lineWidth: 2
                  showPoints: never
                  stacking:
                    group: A
                    mode: normal
                unit: Bps
              overrides: []
            options:
              legend:
                calcs: []
                displayMode: list
                placement: right
                showLegend: true
              tooltip:
                mode: multi
                sort: desc
          version: v10.0.0
    panel-13:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (rate(istio_requests_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination"}[$__rate_interval]))
                      legendFormat: >-
                        {{destination_canonical_service}} <-
                        {{source_canonical_service}}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: >-
          Rate of HTTP/GRPC requests received by this service from client
          services in the Istio system.
        id: 13
        links: []
        title: HTTP/GRPC requests received
        vizConfig:
          group: timeseries
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                custom:
                  fillOpacity: 30
                  gradientMode: opacity
                  lineInterpolation: smooth
                  lineWidth: 2
                  showPoints: never
                  stacking:
                    group: A
                    mode: normal
                unit: reqps
              overrides: []
            options:
              legend:
                calcs: []
                displayMode: list
                placement: right
                showLegend: true
              tooltip:
                mode: multi
                sort: desc
          version: v10.0.0
    panel-14:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >
                        sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (increase(istio_request_duration_milliseconds_sum{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination"}[$__rate_interval:]))

                        /

                        clamp_min(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (increase(istio_request_duration_milliseconds_count{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination"}[$__rate_interval:])), 1)
                      interval: 1m
                      legendFormat: >-
                        {{destination_canonical_service}} <-
                        {{source_canonical_service}}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: >-
          Average latency of HTTP/GRPC requests received by this service from
          client services in the Istio system.
        id: 14
        links: []
        title: HTTP/GRPC request delay
        vizConfig:
          group: timeseries
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                custom:
                  fillOpacity: 30
                  gradientMode: opacity
                  lineInterpolation: smooth
                  lineWidth: 2
                  showPoints: never
                unit: ms
              overrides: []
            options:
              legend:
                calcs: []
                displayMode: list
                placement: right
                showLegend: true
              tooltip:
                mode: multi
                sort: desc
          version: v10.0.0
    panel-15:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (rate(istio_request_bytes_sum{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination"}[$__rate_interval]))
                      legendFormat: >-
                        {{destination_canonical_service}} <-
                        {{source_canonical_service}}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: >-
          Rate of HTTP/GRPC request data received by this service from client
          services in the Istio system.
        id: 15
        links: []
        title: HTTP/GRPC request throughput
        vizConfig:
          group: timeseries
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                custom:
                  fillOpacity: 30
                  gradientMode: opacity
                  lineInterpolation: smooth
                  lineWidth: 2
                  showPoints: never
                  stacking:
                    group: A
                    mode: normal
                unit: Bps
              overrides: []
            options:
              legend:
                calcs: []
                displayMode: list
                placement: right
                showLegend: true
              tooltip:
                mode: multi
                sort: desc
          version: v10.0.0
    panel-16:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (rate(istio_response_bytes_sum{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination"}[$__rate_interval]))
                      legendFormat: >-
                        {{destination_canonical_service}} ->
                        {{source_canonical_service}}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: >-
          Rate of HTTP/GRPC response data sent from this service to client
          services in the Istio system.
        id: 16
        links: []
        title: HTTP/GRPC response throughput
        vizConfig:
          group: timeseries
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                custom:
                  fillOpacity: 30
                  gradientMode: opacity
                  lineInterpolation: smooth
                  lineWidth: 2
                  showPoints: never
                  stacking:
                    group: A
                    mode: normal
                unit: Bps
              overrides: []
            options:
              legend:
                calcs: []
                displayMode: list
                placement: right
                showLegend: true
              tooltip:
                mode: multi
                sort: desc
          version: v10.0.0
    panel-17:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination", request_protocol="http",
                        response_code=~"[123].+"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{destination_canonical_service}} ->
                        {{source_canonical_service}}: (ok)
                    version: v0
                  refId: A
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination", request_protocol="http",
                        response_code=~"[45].+"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{destination_canonical_service}} ->
                        {{source_canonical_service}}: (error)
                    version: v0
                  refId: B
            queryOptions: {}
            transformations: []
        description: >-
          Overview of the types of HTTP responses sent from this service to
          client services in the Istio system.
        id: 17
        links: []
        title: HTTP response overview
        vizConfig:
          group: piechart
          kind: VizConfig
          spec:
            fieldConfig:
              defaults: {}
              overrides: []
            options:
              legend:
                placement: right
                showLegend: true
              reduceOptions:
                calcs:
                  - sum
              tooltip:
                mode: multi
                sort: desc
          version: v10.0.0
    panel-18:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination", request_protocol="http",
                        response_code=~"1.+"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{destination_canonical_service}} ->
                        {{source_canonical_service}}: (1xx)
                    version: v0
                  refId: A
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination", request_protocol="http",
                        response_code=~"2.+"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{destination_canonical_service}} ->
                        {{source_canonical_service}}: (2xx)
                    version: v0
                  refId: B
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination", request_protocol="http",
                        response_code=~"3.+"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{destination_canonical_service}} ->
                        {{source_canonical_service}}: (3xx)
                    version: v0
                  refId: C
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination", request_protocol="http",
                        response_code=~"4.+"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{destination_canonical_service}} ->
                        {{source_canonical_service}}: (4xx)
                    version: v0
                  refId: D
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination", request_protocol="http",
                        response_code=~"5.+"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{destination_canonical_service}} ->
                        {{source_canonical_service}}: (5xx)
                    version: v0
                  refId: E
            queryOptions: {}
            transformations: []
        description: >-
          The types of HTTP responses sent from this service to client services
          in the Istio system.
        id: 18
        links: []
        title: HTTP responses / $__interval
        vizConfig:
          group: timeseries
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                custom:
                  fillOpacity: 30
                  gradientMode: opacity
                  lineInterpolation: smooth
                  lineWidth: 2
                  showPoints: never
                  stacking:
                    group: A
                    mode: normal
              overrides: []
            options:
              legend:
                calcs:
                  - min
                  - max
                  - mean
                displayMode: table
                showLegend: true
              tooltip:
                mode: multi
                sort: desc
          version: v10.0.0
    panel-19:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination",
                        grpc_response_status="0"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{destination_canonical_service}} ->
                        {{source_canonical_service}}: (ok)
                    version: v0
                  refId: A
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination",
                        grpc_response_status=~"[1-9]\\d*"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{destination_canonical_service}} ->
                        {{source_canonical_service}}: (error)
                    version: v0
                  refId: B
            queryOptions: {}
            transformations: []
        description: >-
          Overview of the types of GRPC responses sent from this service to
          client services in the Istio system.
        id: 19
        links: []
        title: GRPC response overview
        vizConfig:
          group: piechart
          kind: VizConfig
          spec:
            fieldConfig:
              defaults: {}
              overrides: []
            options:
              legend:
                placement: right
                showLegend: true
              reduceOptions:
                calcs:
                  - sum
              tooltip:
                mode: multi
                sort: desc
          version: v10.0.0
    panel-2:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (rate(istio_requests_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source"}[$__rate_interval]))
                      legendFormat: >-
                        {{source_canonical_service}} ->
                        {{destination_canonical_service}}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: >-
          Rate of HTTP/GRPC requests sent from this service to server services
          in the Istio system.
        id: 2
        links: []
        title: HTTP/GRPC requests sent
        vizConfig:
          group: timeseries
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                color:
                  mode: palette-classic
                custom:
                  axisBorderShow: false
                  axisCenteredZero: false
                  axisColorMode: text
                  axisLabel: ''
                  axisPlacement: auto
                  barAlignment: 0
                  barWidthFactor: 0.6
                  drawStyle: line
                  fillOpacity: 30
                  gradientMode: opacity
                  hideFrom:
                    legend: false
                    tooltip: false
                    viz: false
                  insertNulls: false
                  lineInterpolation: smooth
                  lineWidth: 2
                  pointSize: 5
                  scaleDistribution:
                    type: linear
                  showPoints: never
                  showValues: false
                  spanNulls: false
                  stacking:
                    group: A
                    mode: normal
                  thresholdsStyle:
                    mode: 'off'
                thresholds:
                  mode: absolute
                  steps:
                    - color: green
                      value: 0
                    - color: red
                      value: 80
                unit: reqps
              overrides: []
            options:
              legend:
                calcs: []
                displayMode: list
                placement: right
                showLegend: true
              tooltip:
                hideZeros: false
                mode: multi
                sort: desc
          version: 12.4.0-19938312174
    panel-20:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination",
                        grpc_response_status=~"[0-9]\\d*"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{destination_canonical_service}} ->
                        {{source_canonical_service}}: {{grpc_response_status}}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: >-
          The types of GRPC responses sent from this service to client services
          in the Istio system.
        id: 20
        links: []
        title: GRPC responses / $__interval
        vizConfig:
          group: timeseries
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                custom:
                  fillOpacity: 30
                  gradientMode: opacity
                  lineInterpolation: smooth
                  lineWidth: 2
                  showPoints: never
                  stacking:
                    group: A
                    mode: normal
              overrides: []
            options:
              legend:
                calcs:
                  - min
                  - max
                  - mean
                displayMode: table
                showLegend: true
              tooltip:
                mode: multi
                sort: desc
          version: v10.0.0
    panel-21:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (rate(istio_tcp_received_bytes_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination"}[$__rate_interval]))
                      legendFormat: >-
                        {{destination_canonical_service}} <-
                        {{source_canonical_service}}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: >-
          Rate of TCP request data received by this service from client services
          in the Istio system.
        id: 21
        links: []
        title: TCP request throughput
        vizConfig:
          group: timeseries
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                custom:
                  fillOpacity: 30
                  gradientMode: opacity
                  lineInterpolation: smooth
                  lineWidth: 2
                  showPoints: never
                  stacking:
                    group: A
                    mode: normal
                unit: Bps
              overrides: []
            options:
              legend:
                calcs: []
                displayMode: list
                placement: right
                showLegend: true
              tooltip:
                mode: multi
                sort: desc
          version: v10.0.0
    panel-22:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (rate(istio_tcp_sent_bytes_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",source_canonical_service=~"$client_service",
                        reporter="destination"}[$__rate_interval]))
                      legendFormat: >-
                        {{destination_canonical_service}} ->
                        {{source_canonical_service}}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: >-
          Rate of TCP response data sent from this service to client services in
          the Istio system.
        id: 22
        links: []
        title: TCP response throughput
        vizConfig:
          group: timeseries
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                custom:
                  fillOpacity: 30
                  gradientMode: opacity
                  lineInterpolation: smooth
                  lineWidth: 2
                  showPoints: never
                  stacking:
                    group: A
                    mode: normal
                unit: Bps
              overrides: []
            options:
              legend:
                calcs: []
                displayMode: list
                placement: right
                showLegend: true
              tooltip:
                mode: multi
                sort: desc
          version: v10.0.0
    panel-24:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        sum by(job, cluster, service, workload)
                        (label_replace(label_replace(rate(istio_requests_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",
                        reporter="source"}[$__rate_interval]), "service", "$1",
                        "source_canonical_service", "(.*)"), "workload", "$1",
                        "source_workload", "(.*)"))
                      format: table
                      instant: true
                    version: v0
                  refId: A
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        sum by(job, cluster, service, workload)
                        (label_replace(label_replace(rate(istio_requests_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",
                        reporter="destination"}[$__rate_interval]), "service",
                        "$1", "destination_canonical_service", "(.*)"),
                        "workload", "$1", "destination_workload", "(.*)"))
                      format: table
                      instant: true
                    version: v0
                  refId: B
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >
                        sum by(job, cluster, service, workload)
                        (label_replace(label_replace(increase(istio_request_duration_milliseconds_sum{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",
                        reporter="source"}[$__rate_interval:]), "service", "$1",
                        "source_canonical_service", "(.*)"), "workload", "$1",
                        "source_workload", "(.*)"))

                        /

                        clamp_min(sum by(job, cluster, service, workload)
                        (label_replace(label_replace(increase(istio_request_duration_milliseconds_count{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",
                        reporter="source"}[$__rate_interval:]), "service", "$1",
                        "source_canonical_service", "(.*)"), "workload", "$1",
                        "source_workload", "(.*)")), 1)
                      format: table
                      instant: true
                      interval: 1m
                    version: v0
                  refId: C
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >
                        sum by(job, cluster, service, workload)
                        (label_replace(label_replace(increase(istio_request_duration_milliseconds_sum{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",
                        reporter="destination"}[$__rate_interval:]), "service",
                        "$1", "destination_canonical_service", "(.*)"),
                        "workload", "$1", "destination_workload", "(.*)"))

                        /

                        clamp_min(sum by(job, cluster, service, workload)
                        (label_replace(label_replace(increase(istio_request_duration_milliseconds_count{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",
                        reporter="destination"}[$__rate_interval:]), "service",
                        "$1", "destination_canonical_service", "(.*)"),
                        "workload", "$1", "destination_workload", "(.*)")), 1)
                      format: table
                      instant: true
                      interval: 1m
                    version: v0
                  refId: D
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >
                        100 * sum by(job, cluster, service, workload)
                        (label_replace(label_replace(increase(istio_requests_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",
                        reporter="source", request_protocol="http",
                        response_code=~"[123].+"}[$__rate_interval:]),
                        "service", "$1", "source_canonical_service", "(.*)"),
                        "workload", "$1", "source_workload", "(.*)"))

                        /

                        clamp_min(sum by(job, cluster, service, workload)
                        (label_replace(label_replace(increase(istio_requests_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",
                        reporter="source",
                        request_protocol="http"}[$__rate_interval:]), "service",
                        "$1", "source_canonical_service", "(.*)"), "workload",
                        "$1", "source_workload", "(.*)")), 1)
                      format: table
                      instant: true
                      interval: 1m
                    version: v0
                  refId: E
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >
                        100 * sum by(job, cluster, service, workload)
                        (label_replace(label_replace(increase(istio_requests_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",
                        reporter="destination", request_protocol="http",
                        response_code=~"[123].+"}[$__rate_interval:]),
                        "service", "$1", "destination_canonical_service",
                        "(.*)"), "workload", "$1", "destination_workload",
                        "(.*)"))

                        /

                        clamp_min(sum by(job, cluster, service, workload)
                        (label_replace(label_replace(increase(istio_requests_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",
                        reporter="destination",
                        request_protocol="http"}[$__rate_interval:]), "service",
                        "$1", "destination_canonical_service", "(.*)"),
                        "workload", "$1", "destination_workload", "(.*)")), 1)
                      format: table
                      instant: true
                      interval: 1m
                    version: v0
                  refId: F
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        sum by(job, cluster, service, workload)
                        (label_replace(label_replace(rate(istio_tcp_received_bytes_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",
                        reporter="source"}[$__rate_interval]), "service", "$1",
                        "source_canonical_service", "(.*)"), "workload", "$1",
                        "source_workload", "(.*)"))
                      format: table
                      instant: true
                    version: v0
                  refId: G
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        sum by(job, cluster, service, workload)
                        (label_replace(label_replace(rate(istio_tcp_sent_bytes_total{job=~"$job",cluster=~"$cluster",destination_workload_namespace=~"$namespace",destination_canonical_service=~"$service",
                        reporter="destination"}[$__rate_interval]), "service",
                        "$1", "destination_canonical_service", "(.*)"),
                        "workload", "$1", "destination_workload", "(.*)"))
                      format: table
                      instant: true
                    version: v0
                  refId: H
            queryOptions: {}
            transformations:
              - kind: merge
                spec:
                  id: merge
                  options: {}
              - kind: organize
                spec:
                  id: organize
                  options:
                    excludeByName:
                      Time: true
                    includeByName: {}
                    indexByName:
                      Time: 0
                      'Value #A': 5
                      'Value #B': 8
                      'Value #C': 6
                      'Value #D': 9
                      'Value #E': 7
                      'Value #F': 10
                      'Value #G': 11
                      'Value #H': 12
                      cluster: 1
                      job: 2
                      service: 3
                      workload: 4
                    renameByName:
                      'Value #A': HTTP/GRPC tx
                      'Value #B': HTTP/GRPC rx
                      'Value #C': HTTP/GRPC tx delay
                      'Value #D': HTTP/GRPC rx delay
                      'Value #E': HTTP tx success
                      'Value #F': HTTP rx success
                      'Value #G': TCP tx
                      'Value #H': TCP rx
                      cluster: Cluster
                      job: Job
                      service: Service
                      workload: Workload
        description: Workload details for a service in the Istio system.
        id: 24
        links: []
        title: Workloads
        vizConfig:
          group: table
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                noValue: NA
              overrides:
                - matcher:
                    id: byName
                    options: job
                  properties:
                    - id: custom.hidden
                      value: 'true'
                - matcher:
                    id: byName
                    options: Service
                  properties:
                    - id: links
                      value:
                        - title: ''
                          url: >-
                            d/istio-workloads-overview?var-datasource=${datasource}&var-job=${__data.fields["Job"]}&var-cluster=${__data.fields["Cluster"]}&var-service=${__value.raw}&${__url_time_range}
                - matcher:
                    id: byName
                    options: Workload
                  properties:
                    - id: links
                      value:
                        - title: ''
                          url: >-
                            d/istio-workloads-overview?var-datasource=${datasource}&var-job=${__data.fields["Job"]}&var-cluster=${__data.fields["Cluster"]}&var-service=${__data.fields["Service"]}&var-workload=${__value.raw}&${__url_time_range}
                - matcher:
                    id: byName
                    options: HTTP/GRPC tx delay
                  properties:
                    - id: custom.width
                      value: 157
                    - id: custom.align
                      value: left
                    - id: unit
                      value: ms
                - matcher:
                    id: byName
                    options: HTTP/GRPC rx delay
                  properties:
                    - id: custom.width
                      value: 157
                    - id: custom.align
                      value: left
                    - id: unit
                      value: ms
                - matcher:
                    id: byName
                    options: HTTP/GRPC tx
                  properties:
                    - id: custom.align
                      value: left
                    - id: unit
                      value: reqps
                - matcher:
                    id: byName
                    options: HTTP/GRPC rx
                  properties:
                    - id: custom.align
                      value: left
                    - id: unit
                      value: reqps
                - matcher:
                    id: byName
                    options: HTTP tx success
                  properties:
                    - id: custom.align
                      value: left
                    - id: unit
                      value: percent
                - matcher:
                    id: byName
                    options: HTTP rx success
                  properties:
                    - id: custom.align
                      value: left
                    - id: unit
                      value: percent
                - matcher:
                    id: byName
                    options: TCP tx
                  properties:
                    - id: custom.align
                      value: left
                    - id: unit
                      value: Bps
                - matcher:
                    id: byName
                    options: TCP rx
                  properties:
                    - id: custom.align
                      value: left
                    - id: unit
                      value: Bps
            options:
              footer:
                options:
                  footer:
                    reducer:
                      - sum
          version: v10.0.0
    panel-3:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >
                        sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (increase(istio_request_duration_milliseconds_sum{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source"}[$__rate_interval:]))

                        /

                        clamp_min(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (increase(istio_request_duration_milliseconds_count{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source"}[$__rate_interval:])), 1)
                      interval: 1m
                      legendFormat: >-
                        {{source_canonical_service}} ->
                        {{destination_canonical_service}}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: >-
          Average latency of HTTP/GRPC requests sent from this service to server
          services in the Istio system.
        id: 3
        links: []
        title: HTTP/GRPC request delay
        vizConfig:
          group: timeseries
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                color:
                  mode: palette-classic
                custom:
                  axisBorderShow: false
                  axisCenteredZero: false
                  axisColorMode: text
                  axisLabel: ''
                  axisPlacement: auto
                  barAlignment: 0
                  barWidthFactor: 0.6
                  drawStyle: line
                  fillOpacity: 30
                  gradientMode: opacity
                  hideFrom:
                    legend: false
                    tooltip: false
                    viz: false
                  insertNulls: false
                  lineInterpolation: smooth
                  lineWidth: 2
                  pointSize: 5
                  scaleDistribution:
                    type: linear
                  showPoints: never
                  showValues: false
                  spanNulls: false
                  stacking:
                    group: A
                    mode: none
                  thresholdsStyle:
                    mode: 'off'
                thresholds:
                  mode: absolute
                  steps:
                    - color: green
                      value: 0
                    - color: red
                      value: 80
                unit: ms
              overrides: []
            options:
              legend:
                calcs: []
                displayMode: list
                placement: right
                showLegend: true
              tooltip:
                hideZeros: false
                mode: multi
                sort: desc
          version: 12.4.0-19938312174
    panel-4:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (rate(istio_request_bytes_sum{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source"}[$__rate_interval]))
                      legendFormat: >-
                        {{source_canonical_service}} ->
                        {{destination_canonical_service}}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: >-
          Rate of HTTP/GRPC request data sent from this service to server
          services in the Istio system.
        id: 4
        links: []
        title: HTTP/GRPC request throughput
        vizConfig:
          group: timeseries
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                color:
                  mode: palette-classic
                custom:
                  axisBorderShow: false
                  axisCenteredZero: false
                  axisColorMode: text
                  axisLabel: ''
                  axisPlacement: auto
                  barAlignment: 0
                  barWidthFactor: 0.6
                  drawStyle: line
                  fillOpacity: 30
                  gradientMode: opacity
                  hideFrom:
                    legend: false
                    tooltip: false
                    viz: false
                  insertNulls: false
                  lineInterpolation: smooth
                  lineWidth: 2
                  pointSize: 5
                  scaleDistribution:
                    type: linear
                  showPoints: never
                  showValues: false
                  spanNulls: false
                  stacking:
                    group: A
                    mode: normal
                  thresholdsStyle:
                    mode: 'off'
                thresholds:
                  mode: absolute
                  steps:
                    - color: green
                      value: 0
                    - color: red
                      value: 80
                unit: Bps
              overrides: []
            options:
              legend:
                calcs: []
                displayMode: list
                placement: right
                showLegend: true
              tooltip:
                hideZeros: false
                mode: multi
                sort: desc
          version: 12.4.0-19938312174
    panel-5:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (rate(istio_response_bytes_sum{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source"}[$__rate_interval]))
                      legendFormat: >-
                        {{source_canonical_service}} <-
                        {{destination_canonical_service}}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: >-
          Rate of HTTP/GRPC response data received by this service from server
          services in the Istio system.
        id: 5
        links: []
        title: HTTP/GRPC response throughput
        vizConfig:
          group: timeseries
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                color:
                  mode: palette-classic
                custom:
                  axisBorderShow: false
                  axisCenteredZero: false
                  axisColorMode: text
                  axisLabel: ''
                  axisPlacement: auto
                  barAlignment: 0
                  barWidthFactor: 0.6
                  drawStyle: line
                  fillOpacity: 30
                  gradientMode: opacity
                  hideFrom:
                    legend: false
                    tooltip: false
                    viz: false
                  insertNulls: false
                  lineInterpolation: smooth
                  lineWidth: 2
                  pointSize: 5
                  scaleDistribution:
                    type: linear
                  showPoints: never
                  showValues: false
                  spanNulls: false
                  stacking:
                    group: A
                    mode: normal
                  thresholdsStyle:
                    mode: 'off'
                thresholds:
                  mode: absolute
                  steps:
                    - color: green
                      value: 0
                    - color: red
                      value: 80
                unit: Bps
              overrides: []
            options:
              legend:
                calcs: []
                displayMode: list
                placement: right
                showLegend: true
              tooltip:
                hideZeros: false
                mode: multi
                sort: desc
          version: 12.4.0-19938312174
    panel-6:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source", request_protocol="http",
                        response_code=~"[123].+"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{source_canonical_service}} <-
                        {{destination_canonical_service}}: (ok)
                    version: v0
                  refId: A
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source", request_protocol="http",
                        response_code=~"[45].+"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{source_canonical_service}} <-
                        {{destination_canonical_service}}: (error)
                    version: v0
                  refId: B
            queryOptions: {}
            transformations: []
        description: >-
          Overview of the types of HTTP responses received by this service from
          server services in the Istio system.
        id: 6
        links: []
        title: HTTP response overview
        vizConfig:
          group: piechart
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                color:
                  mode: palette-classic
                custom:
                  hideFrom:
                    legend: false
                    tooltip: false
                    viz: false
              overrides: []
            options:
              legend:
                displayMode: list
                placement: right
                showLegend: true
              pieType: pie
              reduceOptions:
                calcs:
                  - sum
                fields: ''
                values: false
              sort: desc
              tooltip:
                hideZeros: false
                mode: multi
                sort: desc
          version: 12.4.0-19938312174
    panel-7:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source", request_protocol="http",
                        response_code=~"1.+"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{source_canonical_service}} <-
                        {{destination_canonical_service}}: (1xx)
                    version: v0
                  refId: A
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source", request_protocol="http",
                        response_code=~"2.+"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{source_canonical_service}} <-
                        {{destination_canonical_service}}: (2xx)
                    version: v0
                  refId: B
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source", request_protocol="http",
                        response_code=~"3.+"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{source_canonical_service}} <-
                        {{destination_canonical_service}}: (3xx)
                    version: v0
                  refId: C
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source", request_protocol="http",
                        response_code=~"4.+"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{source_canonical_service}} <-
                        {{destination_canonical_service}}: (4xx)
                    version: v0
                  refId: D
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source", request_protocol="http",
                        response_code=~"5.+"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{source_canonical_service}} <-
                        {{destination_canonical_service}}: (5xx)
                    version: v0
                  refId: E
            queryOptions: {}
            transformations: []
        description: >-
          The types of HTTP responses received by this service from server
          services in the Istio system.
        id: 7
        links: []
        title: HTTP responses / $__interval
        vizConfig:
          group: timeseries
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                color:
                  mode: palette-classic
                custom:
                  axisBorderShow: false
                  axisCenteredZero: false
                  axisColorMode: text
                  axisLabel: ''
                  axisPlacement: auto
                  barAlignment: 0
                  barWidthFactor: 0.6
                  drawStyle: line
                  fillOpacity: 30
                  gradientMode: opacity
                  hideFrom:
                    legend: false
                    tooltip: false
                    viz: false
                  insertNulls: false
                  lineInterpolation: smooth
                  lineWidth: 2
                  pointSize: 5
                  scaleDistribution:
                    type: linear
                  showPoints: never
                  showValues: false
                  spanNulls: false
                  stacking:
                    group: A
                    mode: normal
                  thresholdsStyle:
                    mode: 'off'
                thresholds:
                  mode: absolute
                  steps:
                    - color: green
                      value: 0
                    - color: red
                      value: 80
              overrides: []
            options:
              legend:
                calcs:
                  - min
                  - max
                  - mean
                displayMode: table
                placement: bottom
                showLegend: true
              tooltip:
                hideZeros: false
                mode: multi
                sort: desc
          version: 12.4.0-19938312174
    panel-8:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source",
                        grpc_response_status="0"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{source_canonical_service}} <-
                        {{destination_canonical_service}}: (ok)
                    version: v0
                  refId: A
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source",
                        grpc_response_status=~"[1-9]\\d*"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{source_canonical_service}} <-
                        {{destination_canonical_service}}: (error)
                    version: v0
                  refId: B
            queryOptions: {}
            transformations: []
        description: >-
          Overview of the types of GRPC responses received by this service from
          server services in the Istio system.
        id: 8
        links: []
        title: GRPC response overview
        vizConfig:
          group: piechart
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                color:
                  mode: palette-classic
                custom:
                  hideFrom:
                    legend: false
                    tooltip: false
                    viz: false
              overrides: []
            options:
              legend:
                displayMode: list
                placement: right
                showLegend: true
              pieType: pie
              reduceOptions:
                calcs:
                  - sum
                fields: ''
                values: false
              sort: desc
              tooltip:
                hideZeros: false
                mode: multi
                sort: desc
          version: 12.4.0-19938312174
    panel-9:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ${datasource}
                    group: prometheus
                    kind: DataQuery
                    spec:
                      expr: >-
                        increase(sum by(job, cluster, source_canonical_service,
                        destination_canonical_service)
                        (istio_requests_total{job=~"$job",cluster=~"$cluster",source_workload_namespace=~"$namespace",source_canonical_service=~"$service",destination_canonical_service=~"$server_service",
                        reporter="source",
                        grpc_response_status=~"[0-9]\\d*"})[$__interval:])
                      interval: 1m
                      legendFormat: >-
                        {{source_canonical_service}} <-
                        {{destination_canonical_service}}:
                        {{grpc_response_status}}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: >-
          The types of GRPC responses received by this service from server
          services in the Istio system.
        id: 9
        links: []
        title: GRPC responses / $__interval
        vizConfig:
          group: timeseries
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                color:
                  mode: palette-classic
                custom:
                  axisBorderShow: false
                  axisCenteredZero: false
                  axisColorMode: text
                  axisLabel: ''
                  axisPlacement: auto
                  barAlignment: 0
                  barWidthFactor: 0.6
                  drawStyle: line
                  fillOpacity: 30
                  gradientMode: opacity
                  hideFrom:
                    legend: false
                    tooltip: false
                    viz: false
                  insertNulls: false
                  lineInterpolation: smooth
                  lineWidth: 2
                  pointSize: 5
                  scaleDistribution:
                    type: linear
                  showPoints: never
                  showValues: false
                  spanNulls: false
                  stacking:
                    group: A
                    mode: normal
                  thresholdsStyle:
                    mode: 'off'
                thresholds:
                  mode: absolute
                  steps:
                    - color: green
                      value: 0
                    - color: red
                      value: 80
              overrides: []
            options:
              legend:
                calcs:
                  - min
                  - max
                  - mean
                displayMode: table
                placement: bottom
                showLegend: true
              tooltip:
                hideZeros: false
                mode: multi
                sort: desc
          version: 12.4.0-19938312174
  layout:
    kind: GridLayout
    spec:
      items: []
  links:
    - asDropdown: false
      icon: ''
      includeVars: false
      keepTime: true
      tags: []
      targetBlank: false
      title: Istio logs
      tooltip: ''
      type: link
      url: /d/istio-logs
    - asDropdown: false
      icon: ''
      includeVars: false
      keepTime: true
      tags: []
      targetBlank: false
      title: Istio overview
      tooltip: ''
      type: link
      url: /d/istio-overview
    - asDropdown: false
      icon: ''
      includeVars: false
      keepTime: true
      tags: []
      targetBlank: false
      title: Istio workloads overview
      tooltip: ''
      type: link
      url: /d/istio-workloads-overview
  liveNow: false
  preload: false
  tags:
    - istio-integration
  timeSettings:
    autoRefresh: 30s
    autoRefreshIntervals:
      - 5s
      - 10s
      - 30s
      - 1m
      - 5m
      - 15m
      - 30m
      - 1h
      - 2h
      - 1d
    fiscalYearStartMonth: 0
    from: now-30m
    hideTimepicker: false
    timezone: default
    to: now
  title: Istio services overview
  variables:
    - kind: DatasourceVariable
      spec:
        allowCustomValue: true
        current:
          text: ''
          value: ''
        hide: dontHide
        includeAll: false
        label: Data source
        multi: false
        name: datasource
        options: []
        pluginId: prometheus
        refresh: onDashboardLoad
        regex: (?!grafanacloud-usage|grafanacloud-ml-metrics).+
        skipUrlSync: false
    - kind: QueryVariable
      spec:
        allValue: .+
        allowCustomValue: true
        current:
          text: ''
          value: ''
        hide: dontHide
        includeAll: true
        label: Job
        multi: true
        name: job
        options: []
        query:
          datasource:
            name: ${datasource}
          group: prometheus
          kind: DataQuery
          spec:
            __legacyStringValue: label_values(istiod_uptime_seconds{}, job)
          version: v0
        refresh: onTimeRangeChanged
        regex: ''
        skipUrlSync: false
        sort: alphabeticalAsc
    - kind: QueryVariable
      spec:
        allValue: .+
        allowCustomValue: true
        current:
          text: ''
          value: ''
        hide: dontHide
        includeAll: true
        label: K8s cluster
        multi: true
        name: cluster
        options: []
        query:
          datasource:
            name: ${datasource}
          group: prometheus
          kind: DataQuery
          spec:
            __legacyStringValue: label_values(istiod_uptime_seconds{job=~"$job"}, cluster)
          version: v0
        refresh: onTimeRangeChanged
        regex: ''
        skipUrlSync: false
        sort: alphabeticalAsc
    - kind: QueryVariable
      spec:
        allowCustomValue: true
        current:
          text: ''
          value: ''
        hide: dontHide
        includeAll: true
        label: Namespace
        multi: true
        name: namespace
        options: []
        query:
          datasource:
            name: ${datasource}
          group: prometheus
          kind: DataQuery
          spec:
            __legacyStringValue: >-
              query_result(sum(istio_requests_total{job=~"$job",
              cluster=~"$cluster"}) by (destination_workload_namespace,
              source_workload_namespace) or
              sum(istio_tcp_sent_bytes_total{job=~"$job", cluster=~"$cluster"})
              by (destination_workload_namespace, source_workload_namespace))
          version: v0
        refresh: onTimeRangeChanged
        regex: /(?:destination|source)_workload_namespace="([^"]*)/g
        skipUrlSync: false
        sort: alphabeticalAsc
    - kind: QueryVariable
      spec:
        allowCustomValue: true
        current:
          text: ''
          value: ''
        hide: dontHide
        includeAll: false
        label: Service
        multi: true
        name: service
        options: []
        query:
          datasource:
            name: ${datasource}
          group: prometheus
          kind: DataQuery
          spec:
            __legacyStringValue: >-
              query_result(sum(istio_requests_total{job=~"$job",
              cluster=~"$cluster", source_workload_namespace=~"$namespace"}) by
              (source_canonical_service) or
              sum(istio_requests_total{job=~"$job", cluster=~"$cluster",
              destination_workload_namespace=~"$namespace"}) by
              (destination_canonical_service) or
              sum(istio_tcp_sent_bytes_total{job=~"$job", cluster=~"$cluster",
              source_workload_namespace=~"$namespace"}) by
              (source_canonical_service) or
              sum(istio_tcp_sent_bytes_total{job=~"$job", cluster=~"$cluster",
              destination_workload_namespace=~"$namespace"}) by
              (destination_canonical_service))
          version: v0
        refresh: onTimeRangeChanged
        regex: /(?:source_canonical_service|destination_canonical_service)="([^"]*)/g
        skipUrlSync: false
        sort: alphabeticalAsc
    - kind: QueryVariable
      spec:
        allowCustomValue: true
        current:
          text: ''
          value: ''
        hide: dontHide
        includeAll: true
        label: Client service
        multi: true
        name: client_service
        options: []
        query:
          datasource:
            name: ${datasource}
          group: prometheus
          kind: DataQuery
          spec:
            __legacyStringValue: >-
              query_result(sum(istio_requests_total{job=~"$job",
              cluster=~"$cluster", destination_canonical_service=~"$service"})
              by (destination_canonical_service, source_canonical_service) or
              sum(istio_tcp_received_bytes_total{job=~"$job",
              cluster=~"$cluster", destination_canonical_service=~"$service"})
              by (destination_canonical_service, source_canonical_service))
          version: v0
        refresh: onTimeRangeChanged
        regex: /source_canonical_service="([^"]*)/
        skipUrlSync: false
        sort: alphabeticalAsc
    - kind: QueryVariable
      spec:
        allowCustomValue: true
        current:
          text: ''
          value: ''
        hide: dontHide
        includeAll: true
        label: Server service
        multi: true
        name: server_service
        options: []
        query:
          datasource:
            name: ${datasource}
          group: prometheus
          kind: DataQuery
          spec:
            __legacyStringValue: >-
              query_result(sum(istio_requests_total{job=~"$job",
              cluster=~"$cluster", source_canonical_service=~"$service"}) by
              (destination_canonical_service, source_canonical_service) or
              sum(istio_tcp_received_bytes_total{job=~"$job",
              cluster=~"$cluster", source_canonical_service=~"$service"}) by
              (destination_canonical_service, source_canonical_service))
          version: v0
        refresh: onTimeRangeChanged
        regex: /destination_canonical_service="([^"]*)/
        skipUrlSync: false
        sort: alphabeticalAsc
status: {}
