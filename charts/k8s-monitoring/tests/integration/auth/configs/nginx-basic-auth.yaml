---
service:
  type: ClusterIP
serverBlock: |-
  server {
    listen 0.0.0.0:8080;
    location /auth-gateway/ {
      auth_basic "Remote Write";
      auth_basic_user_file /etc/nginx/conf/htpasswd;

      proxy_pass http://prometheus-server.prometheus.svc:9090/;
    }
  }
extraVolumes:
  - name: passwords-file
    secret:
      secretName: passwords
extraVolumeMounts:
  - name: passwords-file
    mountPath: /etc/nginx/conf/htpasswd
    subPath: htpasswd
