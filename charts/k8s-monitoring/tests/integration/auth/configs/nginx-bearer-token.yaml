---
service:
  type: ClusterIP
serverBlock: |-
  server {
    listen 0.0.0.0:8080;
    location /remote-write/ {
      if ($http_authorization != "Bearer my-secret-remote-write-token") {
        return 401;
      }

      proxy_pass http://prometheus-server.prometheus.svc:9090/;
    }

    location /otlp/ {
      if ($http_authorization != "Bearer my-secret-otlp-token") {
        return 401;
      }

      proxy_pass http://prometheus-server.prometheus.svc:9090/;
    }
  }
