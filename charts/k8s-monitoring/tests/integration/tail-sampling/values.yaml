---
cluster:
  name: tail-sampling-test

destinations:
  - name: localPrometheus
    type: prometheus
    url: http://prometheus-server.prometheus.svc:9090/api/v1/write
  - name: localTempo
    type: otlp
    url: tempo.tempo.svc:4317
    tls:
      insecure: true
      insecureSkipVerify: true
    metrics: {enabled: false}
    logs: {enabled: false}
    traces: {enabled: true}
    processors:
      tail_sampling:
        enabled: true
        policies:
          - name: and-policy
            type: and
            and:
              and_sub_policy:
                - name: test-and-policy-1
                  type: numeric_attribute
                  key: key1
                  min_value: 1
                  max_value: 256
                - name: test-and-policy-2
                  type: string_attribute
                  key: key2
                  values:
                    - value1
                    - value2

applicationObservability:
  enabled: true
  receivers:
    otlp:
      grpc:
        enabled: true

alloy-receiver:
  enabled: true
  alloy:
    extraPorts:
      - name: otlp-grpc
        port: 4317
        targetPort: 4317
        protocol: TCP
