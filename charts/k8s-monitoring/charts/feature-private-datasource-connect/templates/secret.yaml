{{- if and .Values.enabled .Values.credentials.createSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "feature-private-datasource-connect.fullname" . }}
  labels:
    app.kubernetes.io/name: pdc-agent
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/component: pdc-agent
type: Opaque
data:
  token: {{ .Values.credentials.token | b64enc }}
  hosted-grafana-id: {{ .Values.credentials.hostedGrafanaId | b64enc }}
  cluster: {{ .Values.credentials.cluster | b64enc }}
{{- end }} 